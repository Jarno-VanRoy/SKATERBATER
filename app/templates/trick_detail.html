{% extends 'base.html' %}
{% block content %}
<div class="p-4">
    <h1 class="text-2xl font-bold mb-4">{{ user_trick.trick.name }}</h1>

    <!-- Trick Status -->
    <p class="mb-2">Current Status: <strong>{{ user_trick.status }}</strong></p>

    <!-- Change status form -->
    <form method="POST" action="{{ url_for('main.update_trick_status', user_trick_id=user_trick.id) }}" class="mb-4">
        <label for="status" class="block mb-1">Change Status:</label>
        <select name="status" id="status" class="border rounded px-2 py-1 mr-2">
            <option value="to_learn" {% if user_trick.status == 'to_learn' %}selected{% endif %}>To Learn</option>
            <option value="in_progress" {% if user_trick.status == 'in_progress' %}selected{% endif %}>In Progress</option>
            <option value="mastered" {% if user_trick.status == 'mastered' %}selected{% endif %}>Mastered</option>
        </select>
        <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-1 px-3 rounded">
            Update
        </button>
    </form>

    <!-- Practice Sessions -->
    <h2 class="text-xl font-semibold mt-6 mb-2">Practice Sessions</h2>
    {% if user_trick.sessions %}
        <ul>
            {% for session in user_trick.sessions %}
                <li class="mb-2 border rounded p-2">
                    <strong>{{ session.date.strftime('%Y-%m-%d') }}</strong><br>
                    Tries: {{ session.tries }} | Landed: {{ session.landed }}<br>
                    Notes: {{ session.notes }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No sessions logged yet.</p>
    {% endif %}

    <!-- Log New Session -->
    <h3 class="text-lg font-semibold mt-6 mb-2">Log a New Session</h3>
    <form method="POST" action="{{ url_for('main.log_session', user_trick_id=user_trick.id) }}">
        <div class="mb-2">
            <label for="date" class="block">Date:</label>
            <input type="date" name="date" id="date" class="w-full border rounded px-2 py-1" value="{{ current_date }}">
        </div>
        <div class="mb-2">
            <label for="tries" class="block">Tries:</label>
            <input type="number" name="tries" id="tries" class="w-full border rounded px-2 py-1" required>
        </div>
        <div class="mb-2">
            <label for="landed" class="block">Landed:</label>
            <input type="number" name="landed" id="landed" class="w-full border rounded px-2 py-1" required>
        </div>
        <div class="mb-2">
            <label for="notes" class="block">Notes:</label>
            <textarea name="notes" id="notes" class="w-full border rounded px-2 py-1"></textarea>
        </div>
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Save Session
        </button>
    </form>
</div>
{% endblock %}
